<!DOCTYPE html>
<html>
  <head>
    <script src="lightgl.js"></script>
    <script type="text/javascript">
      const obj = [
        // 前面（緑）
        [
          [0.0, 1.0, 0.0],
          [
            [-0.5, -0.5, 0.5],
            [0.5, -0.5, 0.5],
            [0.5, 0.5, 0.5],
          ],
        ],
        [
          [0.0, 1.0, 0.0],
          [
            [0.5, 0.5, 0.5],
            [-0.5, 0.5, 0.5],
            [-0.5, -0.5, 0.5],
          ],
        ],

        // 背面（赤）
        [
          [1.0, 0.0, 0.0],
          [
            [-0.5, -0.5, -0.5],
            [0.5, -0.5, -0.5],
            [0.5, 0.5, -0.5],
          ],
        ],
        [
          [1.0, 0.0, 0.0],
          [
            [0.5, 0.5, -0.5],
            [-0.5, 0.5, -0.5],
            [-0.5, -0.5, -0.5],
          ],
        ],

        // 左側面（青）
        [
          [0.0, 0.0, 1.0],
          [
            [-0.5, -0.5, -0.5],
            [-0.5, -0.5, 0.5],
            [-0.5, 0.5, 0.5],
          ],
        ],
        [
          [0.0, 0.0, 1.0],
          [
            [-0.5, 0.5, 0.5],
            [-0.5, 0.5, -0.5],
            [-0.5, -0.5, -0.5],
          ],
        ],

        // 右側面（黄）
        [
          [1.0, 1.0, 0.0],
          [
            [0.5, -0.5, -0.5],
            [0.5, -0.5, 0.5],
            [0.5, 0.5, 0.5],
          ],
        ],
        [
          [1.0, 1.0, 0.0],
          [
            [0.5, 0.5, 0.5],
            [0.5, 0.5, -0.5],
            [0.5, -0.5, -0.5],
          ],
        ],

        // 上面（マゼンタ）
        [
          [1.0, 0.0, 1.0],
          [
            [-0.5, 0.5, -0.5],
            [0.5, 0.5, -0.5],
            [0.5, 0.5, 0.5],
          ],
        ],
        [
          [1.0, 0.0, 1.0],
          [
            [0.5, 0.5, 0.5],
            [-0.5, 0.5, 0.5],
            [-0.5, 0.5, -0.5],
          ],
        ],

        // 底面（シアン）
        [
          [0.0, 1.0, 1.0],
          [
            [-0.5, -0.5, -0.5],
            [0.5, -0.5, -0.5],
            [0.5, -0.5, 0.5],
          ],
        ],
        [
          [0.0, 1.0, 1.0],
          [
            [0.5, -0.5, 0.5],
            [-0.5, -0.5, 0.5],
            [-0.5, -0.5, -0.5],
          ],
        ],

        -1, // 終了マーカー
      ];

      function draw() {
        const gl = GL.create();
        let angleX = 30.0,
          angleY = 45.0; // X軸周り, Y軸周りの回転角度
        let zoom = 1.0; // 拡大縮小用の係数

        gl.onupdate = function (s) {
          // 自動でY軸周りに回転
          angleY += 50 * s;

          // 矢印キー操作での回転
          if (GL.keys.UP) angleX -= 5.0; // 上矢印キーでX軸周りの回転を増加
          if (GL.keys.DOWN) angleX += 5.0; // 下矢印キーでX軸周りの回転を減少
          if (GL.keys.LEFT) angleY -= 5.0; // 左矢印キーでY軸周りの回転を増加
          if (GL.keys.RIGHT) angleY += 5.0; // 右矢印キーでY軸周りの回転を減少

          // Zキーで拡大、Xキーで縮小
          if (GL.keys.Z) zoom += 0.01;
          else if (GL.keys.X) zoom -= 0.01;
        };

        gl.ondraw = function () {
          gl.clearColor(1.0, 1.0, 1.0, 1.0);
          gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);

          gl.loadIdentity();
          gl.translate(0.0, 0.0, -5.0);
          gl.rotate(angleX, 1.0, 0.0, 0.0); // X軸周りの回転
          gl.rotate(angleY, 0.0, 1.0, 0.0); // Y軸周りの回転
          gl.scale(zoom, zoom, zoom); // スケール係数の適用

          // 図形の描画
          let i = 0,
            t,
            c,
            vs;
          gl.begin(gl.TRIANGLES);
          while (obj[i] != -1) {
            t = obj[i];
            c = t[0];
            gl.color(c[0], c[1], c[2]);
            vs = t[1];
            for (let j = 0; j < 3; j++) {
              gl.vertex(vs[j][0], vs[j][1], vs[j][2]);
            }
            i++;
          }
          gl.end();
        };

        gl.fullscreen();
        gl.animate();
        gl.enable(gl.DEPTH_TEST); // 5-7.txt を参照
      }
    </script>
  </head>
  <body onload="draw();">
    <canvas id="glCanvas"></canvas>
  </body>
</html>
